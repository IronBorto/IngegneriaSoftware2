<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
                <link rel="stylesheet" href="/app/CSS_barra_principale.css" type="text/css" charset="utf-8" />
                <link rel="stylesheet" href="styles.css">
        <head>
            <title>Intestazione</title>
            <meta charset="UTF-8">
           
        </head>
        <body>
            <iframe src="header.html" width="100%" frameborder="0"></iframe>
      
    <div class="container" id="principale" style="padding-top:40px;">
        <div class="row">
            <div align="center" class ="resize-titolo col-12">
                <h5>Put here your immage</h5>
            </div>
            <form action="" method="post" enctype="multipart/form-data">
                <input name="image" type="file" />
                <br /><br />
            </form>
            <form method="get" action="resultPlace.html">
                <button type="submit">analized immage</button>
            </form>
            <script>
                function check_ext($tipo) {

                switch ($tipo) {
                case "image/png":
                        return true;
                break;
                case "image/jpg":
                        return true;
                break;
                case "image/jpeg":
                        return true;
                break;
                case "image/gif":
                        return true;
                break;
                default:
                        return false;
                break;
                }

                }

                function get_ext($tipo) {

                switch ($tipo) {
                case "image/png":
                        return ".png";
                break;
                case "image/jpg":
                        return ".jpg";
                break;
                case "image/jpeg":
                        return ".jpg";
                break;
                case "image/gif":
                        return ".gif";
                break;
                default:
                        return false;
                break;
                }

                }

                function get_error($tmp, $type, $size, $max_size) {

                if (!is_uploaded_file($tmp)) {
                echo "File caricato in modo non corretto<br />";
                }
                if (!check_ext($type)) {
                echo "Estensione del file non ammesso<br />";
                }
                if ($size > $max_size) {
                echo "Dimensione del file troppo grande<br />";
                }
                echo '<a href="/uploader/index.php">Torna all\'uploader</a>';
                }

                $tmp = $_FILES['image']['tmp_name'];
                $type = $_FILES['image']['type'];
                $size = $_FILES['image']['size'];
                $max_size = 5242880; //dimensione massima in byte consentita
                $folder = "file/"; //cartella di destinazione dell'immagine

                if (is_uploaded_file($tmp) && check_ext($type) && $size <= $max_size) {

                $ext = get_ext($type); //estensione dell'immagine
                $name = time().rand(0, 999); //timestamp attuale + un numero random compreso tra 0 e 999
                $name = $name.$ext; //aggiungo al nome appena creato l'estensione
                $name = $folder.$name; //aggiungo il folder di destinazione
                //esempio risultato finale: folder/timestamp657.gif
                if (move_uploaded_file($tmp, $name)) {
                echo 'Immagine caricata con successo, <a href="'.$name.'"/>vai all\'immagine</a> <br />';
                echo '<a href="/uploader/index.php">Torna all\'uploader</a>';
                } else {
                echo "Non Ã¨ stato possibile caricare l'immagine<br />";
                echo '<a href="/uploader/index.php">Torna all\'uploader</a>';
                }
                } else {

                get_error($tmp, $type, $size, $max_size);
                }
            </script>
        </div>
    </div>
</body>
</html>